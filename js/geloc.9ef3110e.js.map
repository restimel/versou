{"version":3,"sources":["webpack:///./src/views/GeolocSettings.vue","webpack:///./src/views/GeolocSettings.vue?a113","webpack:///./src/views/GeolocSettings.vue?83d7"],"names":["class","values","fields","onChange","textMustBeInteger","refreshTimeComment","geolocSettings","mapSettings","type","id","label","title","unit","value","Math","round","refreshTime","min","comment","this","highPrecision","layer","options","Array","from","layerId","text","iconPosition","iconId","icon","fieldId","time","Number","isFinite","has","components","Back","Form","render"],"mappings":"yIACSA,MAAM,Y,EAEP,eAA6B,UAAzB,wBAAoB,G,wGAF5B,eAOM,MAPN,EAOM,CANF,eAAO,GACP,EACA,eAGE,GAFGC,OAAQ,EAAAC,OACR,QAAO,EAAAC,U,uHCWpB,MAAMC,EAAoB,mDAQ1B,IAAqB,EAArB,cAA4C,OAA5C,c,oBACY,KAAAC,mBAAqB,GAC7B,aACI,MAAMC,EAAiB,OAAMA,eACvBC,EAAc,OAAMA,YAC1B,MAAO,CAAC,CACJC,KAAM,aACP,CACCC,GAAI,cACJC,MAAO,2CACPC,MAAO,6CACPH,KAAM,SACNI,KAAM,WACNC,MAAOC,KAAKC,MAAMT,EAAeU,YAAc,KAC/CC,IAAK,EACLC,QAASC,KAAKd,oBACf,CACCI,GAAI,gBACJC,MAAO,yCACPC,MAAO,uDACPH,KAAM,UACNK,MAAOP,EAAec,eACvB,CACCZ,KAAM,aACP,CACCC,GAAI,QACJC,MAAO,gBACPF,KAAM,SACNK,MAAON,EAAYc,MACnBC,QAASC,MAAMC,KAAK,OAAQ,EAAEC,MAAa,CACvCC,KAAMD,EACNZ,MAAOY,MAEZ,CACChB,GAAI,eACJC,MAAO,6BACPF,KAAM,SACNK,MAAON,EAAYoB,aACnBL,QAASC,MAAMC,KAAK,OAAO,EAAEI,EAAQC,MAAU,CAC3CH,KAAMG,EAAKnB,MACXG,MAAOe,MAEZ,CACClB,MAAO,qBACPF,KAAM,QACNK,MAAO,eAAWN,EAAYoB,gBAI9B,SAASG,EAAiBjB,GAC9B,OAAOiB,GACH,IAAK,cAAe,CAChB,MAAMC,EAAgB,KAARlB,EACVmB,OAAOC,SAASF,IAASA,EAAO,GAChC,OAAMzB,eAAeU,YAAce,EACnCZ,KAAKd,mBAAqB,IAE1Bc,KAAKd,mBAAqBD,EAE9B,MAEJ,IAAK,gBACD,OAAME,eAAec,gBAAkBP,EACvC,MACJ,IAAK,QACG,OAAOqB,IAAIrB,KACX,OAAMN,YAAYc,MAAQR,GAE9B,MACJ,IAAK,eACG,OAAMqB,IAAIrB,KACV,OAAMN,YAAYoB,aAAed,GAErC,MACJ,QACI,eAAa,aAAaiB,qBAA4B,CAACtB,KAAM,aA3ExD,EAAc,gBANlC,eAAQ,CACL2B,WAAY,CACRC,OAAA,KACAC,OAAA,SAGa,WCtBrB,EAAOC,OAASA,EAED","file":"js/geloc.9ef3110e.js","sourcesContent":["<template>\n    <div class=\"settings\">\n        <Back/>\n        <h1>Geolocation settings</h1>\n        <Form\n            :values=\"fields\"\n            @input=\"onChange\"\n        />\n    </div>\n</template>\n<script lang=\"ts\">\nimport { Options, Vue } from 'vue-class-component';\nimport store from '@/Store';\nimport Back from '@/components/Back.vue';\nimport Form from '@/components/Form.vue';\nimport {\n    FieldSelectOption,\n    FormItem,\n    LayerId,\n} from '@/Types';\nimport notification from '@/Notification';\nimport {\n    layers,\n    icons,\n    getUrlIcon,\n} from '@/tools/mapInfo';\n\nconst textMustBeInteger = 'Cette valeur doit être un nombre entier positif.';\n\n@Options({\n    components: {\n        Back,\n        Form,\n    },\n})\nexport default class GeolocSettings extends Vue {\n    private refreshTimeComment = '';\n    get fields(): Partial<FormItem>[] {\n        const geolocSettings = store.geolocSettings;\n        const mapSettings = store.mapSettings;\n        return [{\n            type: 'emptyLine',\n        }, {\n            id: 'refreshTime',\n            label: 'Délai de rafraichissement de la position',\n            title: 'Temps entre 2 enregistrements de positions',\n            type: 'number',\n            unit: 'secondes',\n            value: Math.round(geolocSettings.refreshTime / 1000),\n            min: 1,\n            comment: this.refreshTimeComment,\n        }, {\n            id: 'highPrecision',\n            label: 'Utiliser une plus grande précision GPS',\n            title: 'Cette fonctionnalité peut consommer plus de batterie',\n            type: 'boolean',\n            value: geolocSettings.highPrecision,\n        }, {\n            type: 'emptyLine',\n        }, {\n            id: 'layer',\n            label: 'Fond de carte',\n            type: 'select',\n            value: mapSettings.layer,\n            options: Array.from(layers, ([layerId]) => ({\n                text: layerId,\n                value: layerId,\n            } as FieldSelectOption)),\n        }, {\n            id: 'iconPosition',\n            label: 'Marqueur de votre position',\n            type: 'select',\n            value: mapSettings.iconPosition,\n            options: Array.from(icons, ([iconId, icon]) => ({\n                text: icon.label,\n                value: iconId,\n            } as FieldSelectOption)),\n        }, {\n            label: 'Aperçu du marqueur',\n            type: 'image',\n            value: getUrlIcon(mapSettings.iconPosition),\n        }];\n    }\n\n    private onChange(fieldId: string, value: string) {\n        switch(fieldId) {\n            case 'refreshTime': {\n                const time = +value * 1000;\n                if (Number.isFinite(time) && time > 0) {\n                    store.geolocSettings.refreshTime = time;\n                    this.refreshTimeComment = '';\n                } else {\n                    this.refreshTimeComment = textMustBeInteger;\n                }\n                break;\n            }\n            case 'highPrecision':\n                store.geolocSettings.highPrecision = !!value;\n                break;\n            case 'layer':\n                if (layers.has(value as LayerId)) {\n                    store.mapSettings.layer = value as LayerId;\n                }\n                break;\n            case 'iconPosition':\n                if (icons.has(value)) {\n                    store.mapSettings.iconPosition = value;\n                }\n                break;\n            default:\n                notification(`field id \"${fieldId}\" does not exists`, {type: 'error'});\n        }\n    }\n}\n</script>\n","\nimport { Options, Vue } from 'vue-class-component';\nimport store from '@/Store';\nimport Back from '@/components/Back.vue';\nimport Form from '@/components/Form.vue';\nimport {\n    FieldSelectOption,\n    FormItem,\n    LayerId,\n} from '@/Types';\nimport notification from '@/Notification';\nimport {\n    layers,\n    icons,\n    getUrlIcon,\n} from '@/tools/mapInfo';\n\nconst textMustBeInteger = 'Cette valeur doit être un nombre entier positif.';\n\n@Options({\n    components: {\n        Back,\n        Form,\n    },\n})\nexport default class GeolocSettings extends Vue {\n    private refreshTimeComment = '';\n    get fields(): Partial<FormItem>[] {\n        const geolocSettings = store.geolocSettings;\n        const mapSettings = store.mapSettings;\n        return [{\n            type: 'emptyLine',\n        }, {\n            id: 'refreshTime',\n            label: 'Délai de rafraichissement de la position',\n            title: 'Temps entre 2 enregistrements de positions',\n            type: 'number',\n            unit: 'secondes',\n            value: Math.round(geolocSettings.refreshTime / 1000),\n            min: 1,\n            comment: this.refreshTimeComment,\n        }, {\n            id: 'highPrecision',\n            label: 'Utiliser une plus grande précision GPS',\n            title: 'Cette fonctionnalité peut consommer plus de batterie',\n            type: 'boolean',\n            value: geolocSettings.highPrecision,\n        }, {\n            type: 'emptyLine',\n        }, {\n            id: 'layer',\n            label: 'Fond de carte',\n            type: 'select',\n            value: mapSettings.layer,\n            options: Array.from(layers, ([layerId]) => ({\n                text: layerId,\n                value: layerId,\n            } as FieldSelectOption)),\n        }, {\n            id: 'iconPosition',\n            label: 'Marqueur de votre position',\n            type: 'select',\n            value: mapSettings.iconPosition,\n            options: Array.from(icons, ([iconId, icon]) => ({\n                text: icon.label,\n                value: iconId,\n            } as FieldSelectOption)),\n        }, {\n            label: 'Aperçu du marqueur',\n            type: 'image',\n            value: getUrlIcon(mapSettings.iconPosition),\n        }];\n    }\n\n    private onChange(fieldId: string, value: string) {\n        switch(fieldId) {\n            case 'refreshTime': {\n                const time = +value * 1000;\n                if (Number.isFinite(time) && time > 0) {\n                    store.geolocSettings.refreshTime = time;\n                    this.refreshTimeComment = '';\n                } else {\n                    this.refreshTimeComment = textMustBeInteger;\n                }\n                break;\n            }\n            case 'highPrecision':\n                store.geolocSettings.highPrecision = !!value;\n                break;\n            case 'layer':\n                if (layers.has(value as LayerId)) {\n                    store.mapSettings.layer = value as LayerId;\n                }\n                break;\n            case 'iconPosition':\n                if (icons.has(value)) {\n                    store.mapSettings.iconPosition = value;\n                }\n                break;\n            default:\n                notification(`field id \"${fieldId}\" does not exists`, {type: 'error'});\n        }\n    }\n}\n","import { render } from \"./GeolocSettings.vue?vue&type=template&id=2d05135a\"\nimport script from \"./GeolocSettings.vue?vue&type=script&lang=ts\"\nexport * from \"./GeolocSettings.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}